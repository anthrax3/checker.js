/*! Checker - v1.3.0 - 2013-12-12
* https://github.com/rbarros/checker.js
* Copyright (c) 2013 Ramon Barros; Licensed MIT */
!function(a,b){"use strict";a.fn.checker=function(b){var c,d="object"==typeof b&&b.instance||!1;return d?this.each(function(){c=new a.checker(this,b),a.data(this,"checker",c)}):c=this.each(function(){a.data(this,"checker",new a.checker(this,b))}),c},a.checker=function(b,c){this.version="1.2.0",this.el=b,this.callback_submit=!1,this.options=a.extend({},a.checker.options,c),this.debug("log",this.options),this.init()},a.checker.options={debug:!1,check:!1,keyup:!0,blur:!0,checkStatus:"invalid",blockForm:".formChecker",imgValid:"img/valid.png",imgInvalid:"img/invalid.png",imgError:"img/error.png",pattern:/\W/g,replace:"",num:4,defaultCss:{"background-color":"#FFF",border:"1px solid #CCC",padding:"5px 15px 5px 5px",color:"#000",margin:"0"},placeholder:"",notificationStyle:!0,showErrorText:!0,errorCss:{border:"1px solid rgb(197, 0, 0)"},showSuccessText:!0,successCss:{border:"1px solid rgb(0, 197, 0)"},errorText:"O campo %s deve ser informado.",ajax:{async:!1,url:"php/checker.php",type:"POST",data:{id:1},dataType:"json"},done:function(a,c){b.console.info("success",a,c)},fail:function(a,c){b.console.error("error",a,c)},always:function(a,c){b.console.warn("complete",a,c)}},a.checker.prototype.debug=function(a,c){this.options.debug===!0&&(b.console.log("checker:"),"log"===a&&b.console.log(c),"warn"===a&&b.console.warn(c),"error"===a&&b.console.error(c),"info"===a&&b.console.info(c),"clear"===a&&b.console.clear())},a.checker.prototype.init=function(){var b=this,c=a(this.el);this.debug("log","Initialized"),this.alterCss(),this.alterPlaceholder(),this.checkValue(),this.options.keyup===!0&&c.on("keyup",{self:b},b.checkValue),this.options.blur===!0&&c.on("blur",{self:b},b.checkValue)},a.checker.prototype.setOption=function(a,b){return this.options[a]=b,this},a.checker.prototype.alterCss=function(){return"object"==typeof this.options.defaultCss&&(this.debug("log","Alter css element"),a(this.el).css(this.options.defaultCss)),this},a.checker.prototype.alterPlaceholder=function(){var b=a(this.el),c=this.options.placeholder||b.attr("placeholder")||b.attr("title")||b.attr("name");return b.attr("placeholder",c),this.debug("log","Alter placeholder element"),this},a.checker.prototype.checkValue=function(b){var c=b?b.data.self:this,d=b?b.which:!0,e=a(c.el);c.replaceText(),c.debug("log","Check Value"),c.debug("log",e.val()),e.val().length>c.options.num&&13!==d?(c.debug("info","Value "+e.val().length+" greater than "+c.options.num),c.check()):e.val().length>c.options.num&&13===d?(c.callback_submit=!1,c.check()):e.val().length<c.options.num&&13!==d&&(c.debug("info","Value "+e.val().length+" less than "+c.options.num),e.val().length>0&&e.css(c.invalidCss()),c.callback_submit=!1),c.blockForm()},a.checker.prototype.replaceText=function(){var b,c=a(this.el),d=this.options.pattern||!1,e=this.options.replace||"";"object"==typeof d&&(""!==c.val()?(b=c.val(),c.val(b.replace(d,e))):(b=c.text(),c.text(b.replace(d,e))))},a.checker.prototype.check=function(){var b,c,d=this,e=a(this.el);return d.debug("info","Check element:"),d.debug("info",e),c=d.options.check?d.checkData():{valid:d.options.checkStatus},d.debug("info",c),b=d.errorCss(),c&&c.valid&&("valid"===c.valid?(d.options.notificationStyle===!0&&d.successStyle(),b=d.validCss(),d.callback_submit=!0):"invalid"===c.valid?(b=d.invalidCss(),d.callback_submit=!1):"error"===c.valid&&(b=d.errorCss(),d.callback_submit=!1)),e.css(b),this},a.checker.prototype.checkData=function(){var b,c,d,e,f,g,h,i,j;return b=this,c=a(b.el),d=c.attr("name"),e=c.val(),i=c.data("old"),b.debug("info","Initialized ajax"),b.options.ajax&&b.options.ajax.url?(j={data:{old:i}},b.debug("warn","Value old "+i),j.data[d]=e,h=a.extend(!0,this.options.ajax,j),b.debug("warn","Request:"),b.debug("warn",h),f=a.ajax(h),f.responseJSON?(g=f.responseJSON,b.debug("warn","Response is JSON")):f.responseText?(g=JSON.parse(f.responseText),b.debug("warn","Response is object")):(g={valid:"error"},b.debug("error","Response is not object")),b.debug("info",g),f.done(function(){b.debug("info","Callback function done."),b.options.done(c,g)}).fail(function(){b.debug("error","Callback function fail."),b.options.fail(c,g)}).always(function(){b.debug("warn","Callback function always."),b.options.always(c,g)}),"undefined"===g&&(g={valid:"error"})):(g={valid:"error"},b.debug("error","Options ajax or ajax.url not is null")),g},a.checker.prototype.blockForm=function(){var b=this;b.debug("info","Block form submit"),b.debug("info",["callback_submit",b.callback_submit]),a("form.form-register").on("click","a",function(c){b.debug("info",["Click anchor",this]),b.callback_submit?a("form.form-register").submit():(c.preventDefault(),b.options.notificationStyle===!0&&b.errorStyle())}),a(b.options.blockForm).submit(function(a){return b.debug("info",["Click input",this]),b.callback_submit?!0:(a.preventDefault(),b.options.notificationStyle===!0&&b.errorStyle(),void 0)})},a.checker.prototype.successStyle=function(){var b,c,d=this,e=a(this.el),f=e.parent(),g=a('<span class="login-check-success" style="margin-left:5px;"/>'),h=/%s/;return d.debug("info","Alter style success."),d.options.showErrorText===!0&&a(".login-check-success").length<=0&&(c=e.data("name")||e.attr("name"),b=d.options.errorText.replace(h,c),g.text(b),f.append(g),g.delay(800).fadeOut()),"object"==typeof this.options.successCss&&e.css(this.options.successCss),this},a.checker.prototype.errorStyle=function(){var b,c,d=this,e=a(this.el),f=e.parent(),g=a('<span class="login-check-error" style="margin-left:5px;"/>'),h=/%s/;return d.debug("info","Alter style error."),d.options.showErrorText===!0&&a(".login-check-error").length<=0&&(c=e.data("name")||e.attr("name"),b=d.options.errorText.replace(h,c),g.text(b),f.append(g),g.delay(800).fadeOut()),"object"==typeof this.options.errorCss&&e.css(this.options.errorCss),this},a.checker.prototype.validCss=function(){var a={"background-image":"url("+this.options.imgValid+")","background-position":"97% center","background-repeat":"no-repeat"};return a},a.checker.prototype.invalidCss=function(){var a={"background-image":"url("+this.options.imgInvalid+")","background-position":"97% center","background-repeat":"no-repeat"};return a},a.checker.prototype.errorCss=function(){var a={"background-image":"url("+this.options.imgError+")","background-position":"97% center","background-repeat":"no-repeat"};return a}}(jQuery,window);