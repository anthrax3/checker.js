/*! Checker - v1.1.0 - 2013-10-08
* https://github.com/rbarros/checker.js
* Copyright (c) 2013 Ramon Barros; Licensed MIT */
!function($,window,undefined){"use strict";$.fn.checker=function(a){var b,c=a.instance||!1;return c?(this.each(function(){b=new $.checker(this,a),$.data(this,"checker",b)}),b):this.each(function(){$.data(this,"checker",new $.checker(this,a))})},$.checker=function(a,b){this.version="1.1",this.el=a,this.callback_submit=!1,this.options=$.extend({},$.checker.options,b),this.debug("log",this.options),this.init()},$.checker.options={debug:!1,check:!1,checkStatus:"invalid",blockForm:".formChecker",imgValid:"img/valid.png",imgInvalid:"img/invalid.png",imgError:"img/error.png",replace:/\W/g,num:4,defaultCss:{"background-color":"#FFF",border:"1px solid #CCC",padding:"5px 15px 5px 5px",color:"#000",margin:"0"},placeholder:"",errorCss:{border:"1px solid rgb(197, 0, 0)"},showErrorText:!0,errorText:"O campo %s deve ser informado.",ajax:{async:!1,url:"php/checker.php",type:"POST",data:{id:1},dataType:"json"},done:function(){console.info("success")},fail:function(){console.error("error")},always:function(){console.warn("complete")}},$.checker.prototype.debug=function(a,b){this.options.debug===!0&&(console.log("checker:"),"log"===a&&console.log(b),"warn"===a&&console.warn(b),"error"===a&&console.error(b),"info"===a&&console.info(b),"clear"===a&&console.clear())},$.checker.prototype.init=function(){var a=this,b=$(this.el);this.debug("log","Initialized"),this.alterCss(),this.alterPlaceholder(),this.checkValue(),b.on("keyup",{self:a},a.checkValue),b.on("blur",{self:a},a.checkValue)},$.checker.prototype.setOption=function(a,b){return this.options[a]=b,this},$.checker.prototype.alterCss=function(){return"object"==typeof this.options.defaultCss&&(this.debug("log","Alter css element"),$(this.el).css(this.options.defaultCss)),this},$.checker.prototype.alterPlaceholder=function(){var a=$(this.el),b=this.options.placeholder||a.attr("placeholder")||a.attr("title")||a.attr("name");return a.attr("placeholder",b),this.debug("log","Alter placeholder element"),this},$.checker.prototype.checkValue=function(a){var b=a?a.data.self:this,c=a?a.which:!0,d=$(b.el);b.replaceText(),b.debug("log","Check Value"),d.val().length>b.options.num&&13!==c?(b.debug("info","Value "+d.val().length+" greater than "+b.options.num),b.check()):d.val().length>b.options.num&&13===c?(b.callback_submit=!1,b.check()):d.val().length<b.options.num&&13!==c&&(b.debug("info","Value "+d.val().length+" less than "+b.options.num),d.val().length>0&&d.css(b.invalidCss()),b.callback_submit=!1),b.blockForm()},$.checker.prototype.replaceText=function(){var a,b=$(this.el),c=this.options.replace||!1;c===!1&&(""!==b.val()?(a=b.val(),b.val(a.replace(c,""))):(a=b.text(),b.text(a.replace(c,""))))},$.checker.prototype.check=function(){var a,b,c=this,d=$(this.el);return c.debug("info","Check element:"),c.debug("info",d),b=c.options.check?c.checkData():{valid:c.options.checkStatus},c.debug("info",b),a=c.errorCss(),b&&b.valid&&("valid"===b.valid?(a=c.validCss(),c.callback_submit=!0):"invalid"===b.valid?(a=c.invalidCss(),c.callback_submit=!1):"error"===b.valid&&(a=c.errorCss(),c.callback_submit=!1)),d.css(a),this},$.checker.prototype.checkData=function(){var self,el,name,value,jqxhr,status,request,old,dataInput;return self=this,el=$(self.el),name=el.attr("name"),value=el.val(),old=el.data("old"),self.debug("info","Initialized ajax"),self.options.ajax&&self.options.ajax.url?(dataInput={data:{old:old}},self.debug("warn","Value old "+old),dataInput.data[name]=value,request=$.extend(!0,this.options.ajax,dataInput),self.debug("warn","Request:"),self.debug("warn",request),jqxhr=$.ajax(request),jqxhr.responseJSON?(status=jqxhr.responseJSON,self.debug("warn","Response is JSON")):jqxhr.responseText?(status=eval("("+jqxhr.responseText+")"),self.debug("warn","Response is object")):(status={valid:"error"},self.debug("error","Response is not object")),self.debug("info",status),jqxhr.done(function(){self.debug("info","Callback function done."),self.options.done(el,status)}).fail(function(){self.debug("error","Callback function fail."),self.options.fail(el,status)}).always(function(){self.debug("warn","Callback function always."),self.options.always(el,status)}),"undefined"===status&&(status={valid:"error"})):(status={valid:"error"},self.debug("error","Options ajax or ajax.url not is null")),status},$.checker.prototype.blockForm=function(){var a=this;a.debug("info","Block form submit"),$(a.options.blockForm).submit(function(b){return a.callback_submit?!0:(b.preventDefault(),a.errorStyle(),void 0)})},$.checker.errorStyle=function(){var a,b,c=this,d=$(this.el),e=d.parent(),f=$('<span class="login-check-error" style="margin-left:5px;"/>'),g=/%s/;return c.debug("info","Alter style error."),c.options.showErrorText===!0&&$(".login-check-error").length<=0&&(b=d.data("name")||d.attr("name"),a=c.options.errorText.replace(g,b),f.text(a),e.append(f),f.delay(800).fadeOut()),"object"==typeof this.options.errorCss&&d.css(this.options.errorCss),this},$.checker.prototype.validCss=function(){var a={"background-image":"url("+this.options.imgValid+")","background-position":"97% center","background-repeat":"no-repeat"};return a},$.checker.prototype.invalidCss=function(){var a={"background-image":"url("+this.options.imgInvalid+")","background-position":"97% center","background-repeat":"no-repeat"};return a},$.checker.prototype.errorCss=function(){var a={"background-image":"url("+this.options.imgError+")","background-position":"97% center","background-repeat":"no-repeat"};return a}}(jQuery,window);